pipeline {
	agent any
//agent {  docker { image 'debian:latest' }	}
//

stages {
//Начинаем шаги //	
stage ('Сборка образа') {
	agent {  docker { image 'debian:latest' }	
	}
}

stage('Deployment') {
 steps{
	sh './kubectl create -f deployment.yaml -n lesson-4 --validate=false'
	}
}	
		//--||    ||--//
stage('Сетевые настройки ') {
	  steps {
	  sh 'ip a'
	  }
}
stage('Какая ОС ') {
	 steps {
	  sh 'uname -a'	  
	  }
	}  	
}
//
    post {
        always {
            echo 'The jenkins-build repository run is finished.'
        }
        changed {
            echo 'There is a different result than the last run.'
        }
        fixed {
            echo 'This run fixed problems from the previous one.'
        }
        regression {
            echo 'This run had regressions from the previous run.'
        }
        aborted {
            echo 'This run was aborted.'
        }
        failure {
            echo 'This run failed.'
        }
        success {
            echo 'This run succeeded.'
        }
    }
}